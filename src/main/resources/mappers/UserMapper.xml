<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.projrentalprac.user.UserMapper">
    <insert id="insUser" useGeneratedKeys="true"  keyProperty="iuser">
        INSERT INTO t_user
        SET iaddr = #{iaddr}
        , rest_addr = #{restAddr}
        , uid = #{uid}
        , upw = #{upw}
        , nick = #{nick}
        <if test=" storedPic != null and storedPic != '' ">
            , stored_pic = #{storedPic}
        </if>
        <if test=" requestPic != null and requestPic != '' ">
            , request_pic = #{requestPic}
        </if>
        , phone = #{phone}
        , email = #{email}
        , y = #{y}
        , x = #{x}
    </insert>

    <select id="selFindUid">
        SELECT uid
        FROM t_user
        WHERE phone = #{phone}
    </select>

    <insert id="insFindUpw">
        INSERT INTO t_user
        SET upw = #{upw}
        WHERE uid = #{uid}
        and phone = #{phone}
    </insert>

</mapper>